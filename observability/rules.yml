groups:
  - name: app.rules
    rules:
      - alert: HighHttp5xxRate
        expr: (rate(http_server_requests_seconds_count{status=~"5.."}[5m]) / rate(http_server_requests_seconds_count[5m])) > 0.05
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "High 5xx error rate (>5% for 5m)"
      - alert: Http-404-errors
        expr: sum by (job, instance) (
                increase(http_server_requests_seconds_count{job="spring-aop-app", status="404"}[10m])) > 5
        for: 0m
        labels:
          severity: warning
        annotations:
          summary: "High 404 api error being received >5 in 10m"